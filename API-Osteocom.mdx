---
title: ‚ú® API Osteocom Documentacion
---

## ‚ÑπÔ∏è Entornos

- üß™ **Entorno de pruebas**:  
  `https://test.osteocom.me/sv6`

- üöÄ **Entorno de producci√≥n**:  
  `https://www.osteocom.me/sv6`

---

## üìù Notas
Hay que pedir a David Mallo el clientId y clientSecret porque tendra que pedir a Osteocom los de producci√≥n.

---

## Gu√≠a uso encadenado de las APIs

### 1¬∫ API: Autorizaci√≥n
Devuelve un token que se usar√° en el resto de APIs en `Authorization: Bearer TU_TOKEN`.

### 2¬∫  API: Cat√°logo
Devuelve la informaci√≥n de los productos, de ah√≠ se coger√° el `idChannel` y el `price` para la siguiente API y el `videoId` para la ultima API.

### 3¬∫ API: Autorizaci√≥n para el contenido
Devuelve el token que se usar√° en la siguiente API en el body como `userAccessKey`.

### 4¬∫ API: Token del video
Devuelve el token que se usara en el iframe.

---

## üîê API Autorizaci√≥n 

### üìÑ Descripci√≥n
Permite obtener un token de autenticaci√≥n, necesario para realizar cualquier otra petici√≥n a la API.

### üì• Ejemplo de solicitud

**URL**: `/contentLicensing_login`

**M√©todo**: `POST`

**Payload**:
| Campo         | Tipo   | Obligatorio | Descripci√≥n                                            |
|---------------|--------|-------------|--------------------------------------------------------|
| `clientId`    | String |     ‚úÖ      | ID √∫nico del cliente, proporcionado por Osteocom.      |
| `clientSecret`| String |     ‚úÖ      | Clave secreta del cliente, proporcionada por Osteocom. |

**Body ejemplo:**
```json
{
    "clientId":"xxxxxxxx",
    "clientSecret":"xxxxxxxxx"
}
```
--- 

### ‚úÖ Respuesta esperada

| Campo      | Tipo   | Descripci√≥n                                     |
|------------|--------|-------------------------------------------------|
| `tokenType`| String | Token JWT a usar como Bearer en las siguientes llamadas. |

```json
{
    "token": "xxxxxxxxx.xxxxxxxxxx.xxxxxxxxxx"
}
```


### üîÅ C√≥digos de respuesta

| C√≥digo | Descripci√≥n                          |
|--------|--------------------------------------|
| 200    | OK - Token v√°lido.                   |
| 401    | No autorizado - Cliente desconocido. |

---

## üìö API Cat√°logo

### üìÑ Descripci√≥n
Permite acceder al cat√°logo de contenido del cliente.

---

### ‚ö†Ô∏è IMPORTANTE
Para esta API en las pruebas realizadas en el entorno de Pruebas cada vez que se realizaba la petici√≥n hab√≠a que 
poner un userId y un email distintos (inventados) ya que no permitia pedir 2 veces con el mismo userId y email 
dando ‚ùó500 Internal Error Server‚ùó.
Creemos que en el entorno de Producci√≥n eso no pasar√° pero no lo sabemos ya 
que solo podiamos probar en el entorno de Pruebas.

---

### üì• Ejemplo de solicitud

**URL**: `/contentLicensing_catalog`

**M√©todo**: `POST`

**Headers**:
```
Authorization: Bearer TU_TOKEN (obtenido en la API de autenticaci√≥n)
```

**Payload**:
| Campo      | Tipo   | Obligatorio | Descripci√≥n                                      |
|------------|--------|-------------|--------------------------------------------------|
| `clientId` | String |     ‚úÖ      | ID √∫nico del cliente.                            |

**Body ejemplo:**
```json
{
    "clientId":"xxxxxxx"
}
```
---

### ‚úÖ Respuesta esperada

| Campo      | Tipo   | Descripci√≥n                                     |
|------------|--------|-------------------------------------------------|
| `catalog`  | String | Array de objetos, cada uno representa un canal con detalles como autores, im√°genes, v√≠deos, etc. |

```json
{
    "catalog": [
        {
            "idChannel": "6790d4362d61c994a8e7333d", 
            "authors": [
                informaci√≥n de los autores
            ],
            "price": 500,
            "video": [
                {
                    "videoId": "6790d792e700709e4b5d2b87",
                    + informaci√≥n del video
                },
                {
                    "videoId": "6790d993e700709e4b5e0515",
                    + informaci√≥n del video
                }
            ],
            "title": "titulo catalogo prueba",
            "subtitle": null,
            "htmlDescription": null
        }
    ]
}
```

#### ‚ö†Ô∏è IMPORTANTE
`idChannel`: esto ser√° el productId de la siguiente API.

`price`: esto ser√° el price de la siguiente API.

`videoId`: esto ser√° el videoId de la ultima API.

### üîÅ C√≥digos de respuesta

| C√≥digo | Descripci√≥n               |
|--------|----------------------------|
| 200    | OK - Cat√°logo retornado.   |
| 404    | No encontrado.             |
| 500    | Error interno del servidor.|

---

## üõí API Content Access Authorization

### üìÑ Descripci√≥n
Gestiona la autorizaci√≥n de contenido tras la compra, enviando informaci√≥n del usuario y los cursos adquiridos.

### üì• Ejemplo de solicitud

**URL**: `/contentLicensing_contentAccessAuthorization`

**M√©todo**: `POST`

**Headers**:
```
Authorization: Bearer TU_TOKEN (obtenido en la API de autenticaci√≥n)
```

**Payload**:
| Campo             | Tipo     | Obligatorio | Descripci√≥n                                                                |
|-------------------|----------|-------------|----------------------------------------------------------------------------|
| `clientId`        | String   |      ‚úÖ     | ID √∫nico del cliente.                                                      |
| `userId`          | String   |      ‚úÖ     | ID √∫nico del usuario, definido por el partner.                             |
| `email`           | String   |      ‚úÖ     | Correo del usuario (requerido si hay consentimiento de marketing).         |
| `marketingConsent`| Boolean  |      ‚ùå     | `true` si el usuario acepta comunicaciones comerciales.                    |
| `name`            | String   |      ‚ùå     | Nombre del usuario.                                                        |
| `surname`         | String   |      ‚ùå     | Apellido del usuario.                                                      |
| `products`        | Array    |      ‚úÖ     | Lista de productos comprados con su precio correspondiente.                |

**Body ejemplo:**
```json
{
    "clientId": "xxxxxxxx",
    "userId": "usuario",
    "email": "email@usuario.com",
    "products": [
        {
            "productId": "asdf",
            "price": 500
        }
    ]
}
```

---

### ‚úÖ Respuesta esperada

| Campo       | Tipo   | Descripci√≥n                                     |
|-------------|--------|-------------------------------------------------|
| `tokenType` | String | Token para acceso al contenido comprado.        |

```json
{
    "token": "xxxxxxxxxxxxxx.xxxxxxxxxxxxxxxx.xxxxxxxxxxxxx"
}
```

### üîÅ C√≥digos de respuesta

| C√≥digo | Descripci√≥n                       |
|--------|-----------------------------------|
| 200    | OK - Compra exitosa.              |
| 400    | Campo `email` requerido.          |
| 403    | Email mal formateado.             |
| 500    | Error interno del servidor.       |

---

## üé• POST - Video Access API

### üìÑ Descripci√≥n
Permite el acceso del usuario al contenido de v√≠deo previamente autorizado.

### üì• Ejemplo de solicitud

**URL**: `/contentLicensing_videoAccess`

**M√©todo**: `POST`

**Headers**:
```
Authorization: Bearer TU_TOKEN (obtenido en la API de autenticaci√≥n)
```

**Payload**:
| Campo             | Tipo   | Obligatorio | Descripci√≥n                                                            |
|-------------------|--------|-------------|------------------------------------------------------------------------|
| `userId`          | String |      ‚úÖ     | ID √∫nico del usuario, definido por el partner.                         |
| `clientId`        | String |      ‚úÖ     | ID √∫nico del cliente.                                                  |
| `videoId`         | String |      ‚úÖ     | ID √∫nico del v√≠deo.                                                    |
| `userAccessKey`   | String |      ‚úÖ     | Clave de acceso que autentica al usuario.                              |

**Body ejemplo:**
```json
{
  "userId": "usuario",
  "clientId": "xxxxxxxxx",
  "videoId": "asdf1234567",
  "userAccessKey": "xxxxxxxxxx.xxxxxxxxxxxx.xxxxxxxxxxxxx"
}
```
---

### ‚úÖ Respuesta esperada

| Campo            | Tipo   | Descripci√≥n                                                                                      |
|------------------|--------|--------------------------------------------------------------------------------------------------|
| `tokenAuthVideo` | String | Token a utilizar como par√°metro en una URL dedicada para visualizar el v√≠deo en un `<iframe>`.   |

```json
{
    "tokenAuthVideo": "xxxxxxxxxxxxxx.xxxxxxxxxxxxxxxx.xxxxxxxxxxxxx"
}
```
#### IMPORTANTE
Este **token caduca a los 15 minutos** de ser creado.

Si el token caduca, al permanecer en la misma p√°gina, el video se podr√° usar de todas formas.
Una vez caducado el token, el enlace ya no se podr√° usar desde el exterior, a menos que estes 
autorizado para reintentar la llamada y generar un nuevo token. Esto significa que, 
si el usuario actualiza la p√°gina, deber√° realizar la llamada de nuevo para generar un nuevo 
token que se usar√° en la URL que genera la nueva caducidad.

### üîÅ C√≥digos de respuesta

| C√≥digo | Descripci√≥n                              |
|--------|------------------------------------------|
| 200    | OK                                       |
| 401    | Cliente no autorizado.                   |
| 401    | Token de v√≠deo expirado.                 |
| 404    | V√≠deo no encontrado.                     |
| 500    | Error interno del servidor.              |
